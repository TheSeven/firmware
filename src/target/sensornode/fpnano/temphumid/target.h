#pragma once

#define STM32_GPIO_CONFIG \
{ \
    GPIO_CONFIG_PORT( /* PORTA */ \
        /* PA 0 */ MODE_INPUT, TYPE_PUSHPULL, SPEED_2MHZ, PULL_UP, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* Radio IRQ */ \
        /* PA 1 */ MODE_OUTPUT, TYPE_PUSHPULL, SPEED_50MHZ, PULL_NONE, INITCTL_SET, INITVAL_HIGH, SPECIAL_SYS, /* Radio CS */ \
        /* PA 2 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* Battery ADC */ \
        /* PA 3 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* unused */ \
        /* PA 4 */ MODE_OUTPUT, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* LED */ \
        /* PA 5 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_50MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SPI1, /* SPI SCK */ \
        /* PA 6 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_50MHZ, PULL_UP, INITCTL_SET, INITVAL_LOW, SPECIAL_SPI1, /* SPI MISO */ \
        /* PA 7 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_50MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SPI1, /* SPI MOSI */ \
        /* PA 8 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* nonpresent */ \
        /* PA 9 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_2MHZ, PULL_UP, INITCTL_SET, INITVAL_LOW, SPECIAL_I2C1_PA9, /* I2C SCL */ \
        /* PA10 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_2MHZ, PULL_UP, INITCTL_SET, INITVAL_LOW, SPECIAL_I2C1_PA10, /* I2C SDA */ \
        /* PA11 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* nonpresent */ \
        /* PA12 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* nonpresent */ \
        /* PA13 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_50MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* SWDIO */ \
        /* PA14 */ MODE_SPECIAL, TYPE_PUSHPULL, SPEED_50MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* SWCLK */ \
        /* PA15 */ MODE_ANALOG, TYPE_PUSHPULL, SPEED_2MHZ, PULL_NONE, INITCTL_SET, INITVAL_LOW, SPECIAL_SYS, /* nonpresent */ \
    ), \
}

#define SENSORNODE_MAXSENSORS 16
#define SENSORNODE_LEDPIN PIN_A4
#define SENSORNODE_RADIO_NRF24L01P_CSPIN PIN_A1
#define SENSORNODE_RADIO_NRF24L01P_IRQPIN PIN_A0
#define SENSORNODE_STORAGE_SPIFLASH_CSPIN PIN_B1
#define SENSORNODE_SENSOR_TEMPERATURE_HTU21D
#define SENSORNODE_SENSOR_HUMIDITY_HTU21D
#define STM32_ENABLE_I2C
#include "../target.h"

#ifdef __cplusplus
struct __attribute__((packed)) BoardConfig
{
    uint16_t sensorInterval[SENSORNODE_MAXSENSORS];
    uint8_t sensorOffset[SENSORNODE_MAXSENSORS];
};
#endif
